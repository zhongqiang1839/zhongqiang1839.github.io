(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{284:function(e,t,o){var content=o(300);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(7).default)("592e1e4a",content,!0,{sourceMap:!1})},299:function(e,t,o){"use strict";var r=o(284);o.n(r).a},300:function(e,t,o){(e.exports=o(6)(!1)).push([e.i,'.own-container .v-note-wrapper[data-v-3ebfdffe]{min-height:100vh!important;margin-top:0!important}.editor-header[data-v-3ebfdffe]{display:flex;align-items:center;padding:0 1.4rem;height:5.334rem;background-color:#fff;border-bottom:1px solid #ddd;z-index:100}.editor-header .title-input[data-v-3ebfdffe]{margin:0;padding:0;font-size:2rem;font-weight:700;color:#000;border:none;outline:none;flex:1}.editor-header .right-box[data-v-3ebfdffe]{display:flex;align-items:center;justify-content:flex-end}.editor-header .right-box span[data-v-3ebfdffe]{font-size:1.334rem;white-space:nowrap;color:#007fff;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 1rem}.editor-header .right-box img[data-v-3ebfdffe]{width:3.6rem;height:3.6rem;border-radius:50%;background-color:#eee;background-position:50%;background-size:cover;background-repeat:no-repeat;cursor:pointer;margin-left:10px;border:2px solid #000}.editor-header .right-box>.thumbnail[data-v-3ebfdffe]{position:relative}.editor-header .right-box>.thumbnail .art_desc[data-v-3ebfdffe]{height:5.334rem;width:18rem;border-left:1px solid #888;border-top:none;border-bottom:none}.editor-header .right-box>.thumbnail .iconfont[data-v-3ebfdffe]{font-size:2rem;color:#2a2b33!important}.editor-header .right-box>.tag[data-v-3ebfdffe]{position:relative}.editor-header .right-box>.tag .iconfont[data-v-3ebfdffe]{font-weight:bolder}.editor-header .right-box>.tag .panel[data-v-3ebfdffe]{padding:.2rem;width:100%;font-size:1.2rem;white-space:nowrap;color:#909090;background-color:#fff;border-radius:2px;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:100}.editor-header .right-box>.tag .panel input[data-v-3ebfdffe]{padding:.2em 0;width:100%;font-size:.6em;border:none;border-bottom:1px solid #f1f1f1;border-radius:0;outline:none}.editor-header .right-box .tag-box[data-v-3ebfdffe]{position:absolute;top:2.3rem;left:-16rem;width:316px;padding:.5rem;background-color:#fff;color:#909090;border:1px solid #ddd;border-radius:2px;box-shadow:0 1px 2px #f1f1f1;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:9999;transition:all .4s ease-in}.editor-header .right-box .tag-box i[data-v-3ebfdffe]{display:block;font-style:normal;font-size:18px;border-left:2px solid #999;padding-left:8px;margin:20px 0}.editor-header .tag-item[data-v-3ebfdffe]{display:inline-block;margin:0 8px 8px 0;padding:4px 8px;border:1px solid #e6e6e6;font-size:12px;border-radius:4px}.editor-header .tag-item.active[data-v-3ebfdffe]{color:#007fff;border-color:rgba(0,127,255,.15);background-color:rgba(0,127,255,.05)}.editor-header .card-body[data-v-3ebfdffe]{padding:16px 0}.editor-header .tag-list[data-v-3ebfdffe]{overflow:auto;display:flex;flex-wrap:wrap}.editor-header .btn-wrapper[data-v-3ebfdffe]{width:100%;display:flex;justify-content:center;margin-top:20px}.editor-header .btn-wrapper .sub-btn[data-v-3ebfdffe]{display:block;font-size:16px;text-align:center;padding:4px 8px;color:#007fff;background:#fff;outline:none;cursor:pointer;margin:6px auto 0}.editor-header .btn-wrapper .sub-btn.cancel[data-v-3ebfdffe]{color:#999}.menu-view .search[data-v-3ebfdffe]{position:absolute;margin:auto;top:0;right:0;bottom:0;width:40px;height:40px;border-radius:50%;transition:all 1s;z-index:4}.menu-view .search[data-v-3ebfdffe]:hover{cursor:pointer}.menu-view .search[data-v-3ebfdffe]:before{top:12px;left:10px;width:8px;height:2px;background:#666;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.menu-view .search[data-v-3ebfdffe]:after,.menu-view .search[data-v-3ebfdffe]:before{content:"";position:absolute;margin:auto;right:0;bottom:0;transition:all .5s}.menu-view .search[data-v-3ebfdffe]:after{top:-5px;left:-5px;width:14px;height:14px;border-radius:50%;border:2px solid #666}.menu-view input[data-v-3ebfdffe]{position:absolute;top:0;right:0;bottom:0;width:80px;outline:none;border:none;color:#666;transition:all 1s;opacity:0;z-index:5;font-weight:bolder;letter-spacing:.1em}.menu-view input[data-v-3ebfdffe]:hover{cursor:pointer}.menu-view input[data-v-3ebfdffe]:focus{width:250px;opacity:1;cursor:text}.menu-view input:focus~.search[data-v-3ebfdffe]{right:0;z-index:6}.menu-view input[data-v-3ebfdffe]::-webkit-input-placeholder{color:#999;opacity:.5;font-weight:bolder}.menu-view input[data-v-3ebfdffe]:-ms-input-placeholder{color:#999;opacity:.5;font-weight:bolder}.menu-view input[data-v-3ebfdffe]::-ms-input-placeholder{color:#999;opacity:.5;font-weight:bolder}.menu-view input[data-v-3ebfdffe]::placeholder{color:#999;opacity:.5;font-weight:bolder}',""])},331:function(e,t,o){"use strict";o.r(t);o(99),o(100),o(19),o(47);var r=o(131),n=(o(29),o(44),o(3)),d=o(41),l=o.n(d),c=o(20),f=o(11),m=o.n(f),h=(o(18),{layout:"write",components:{},computed:{tagslist:function(){var e=this.$store.state.article.tags;return e.length&&e.map(function(e,t){e.isActive=0===t}),e}},data:function(){return{thumbnail:"",articleTitle:"",isSubmitshow:!1,type:"",tags:[],tagName:"",source:c.a,categorys:c.b,markdownOption:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!1,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},handbook:"> 文章简介\n\n————————————————\n\n正文"}},methods:{$imgAdd:function(e,t){var o=this,r=new FormData;r.append("image",t),l()({url:m.a.serverIp+"/api/upload",method:"post",data:r,headers:{"Content-Type":"multipart/form-data"}}).then(function(t){var data=t.data;console.log(data),o.$refs.md.$img2Url(e,"".concat(m.a.serverIp,"/uploads/").concat(data.filename))})},toggleTags:function(e){e.isActive=!e.isActive,this.$forceUpdate()},toggleTypes:function(e){this.source.map(function(t){return t.isActive=e.value===t.value}),this.$forceUpdate()},toggleCategory:function(e){this.categorys.map(function(t){return t.isActive=e.value===t.value}),this.$forceUpdate()},submitComment:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var o,n,d,l,c,f,content;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.articleTitle&&this.articleTitle.replace(/\s/g,"")){e.next=3;break}return e.abrupt("return",alert("标题呢？"));case 3:if(this.handbook&&this.handbook.replace(/\s/g,"")){e.next=5;break}return e.abrupt("return",alert("内容呢？"));case 5:return o=this.tagslist.map(function(e){if(e.isActive)return e._id}).filter(function(e){return void 0!==e}),n=this.source.filter(function(e){return e.isActive})[0],d=this.categorys.filter(function(e){return e.isActive})[0],l=this.handbook.split("————————————————"),c=Object(r.a)(l,2),f=c[0],content=c[1],e.next=11,this.$store.dispatch("postArticle",{title:this.articleTitle,content:content.toString(),description:f.toString(),keyword:o.join(","),tagName:this.tagName,tag:o,source:n.value,type:d.value,thumb:this.thumbnail});case 11:200===e.sent.code?(alert("文章写入成功"),this.clearCommentContent()):alert("文章写入失败");case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},mounted:function(){}}),v=(o(299),o(2)),component=Object(v.a)(h,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("header",{staticClass:"editor-header"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.articleTitle,expression:"articleTitle"}],staticClass:"title-input",attrs:{type:"text",placeholder:"请输入标题..."},domProps:{value:e.articleTitle},on:{input:function(t){t.target.composing||(e.articleTitle=t.target.value)}}}),e._v(" "),o("div",{staticClass:"right-box"},[o("span",{staticClass:"thumbnail"},[o("div",{staticClass:"menu-view"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.thumbnail,expression:"thumbnail"}],attrs:{type:"text",placeholder:"填入封面大图链接url..."},domProps:{value:e.thumbnail},on:{input:function(t){t.target.composing||(e.thumbnail=t.target.value)}}}),e._v(" "),o("span",{class:["iconfont",e.thumbnail?"icon-image-fill":"icon-image"]})])]),e._v(" "),o("span",{staticClass:"tag"},[o("span",{on:{click:function(t){e.isSubmitshow=!e.isSubmitshow}}},[e._v("发布 "),o("i",{staticClass:"iconfont",class:e.isSubmitshow?"icon-up":"icon-down"})]),e._v(" "),e.isSubmitshow?o("div",{staticClass:"tag-box"},[o("i",[e._v("文章来源")]),e._v(" "),e._l(e.source,function(t,r){return o("div",{key:t.value,staticClass:"tag-item",class:{active:t.isActive},on:{click:function(o){return e.toggleTypes(t)}}},[e._v("\n            "+e._s(t.label)+"\n          ")])}),e._v(" "),o("i",[e._v("文章分类")]),e._v(" "),o("div",{staticClass:"tag-list"},e._l(e.categorys,function(t,r){return o("div",{key:t.value,staticClass:"tag-item",class:{active:t.isActive},on:{click:function(o){return e.toggleCategory(t)}}},[e._v("\n              "+e._s(t.label)+"\n            ")])}),0),e._v(" "),o("i",[e._v("文章标签")]),e._v(" "),o("div",{staticClass:"tag-list"},e._l(e.tagslist,function(t,r){return o("div",{key:t._id,staticClass:"tag-item",class:{active:t.isActive},on:{click:function(o){return e.toggleTags(t)}}},[e._v("\n              "+e._s(t.name)+"\n            ")])}),0),e._v(" "),o("div",{staticClass:"panel"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.tagName,expression:"tagName"}],attrs:{type:"text",placeholder:"添加 1 个新标签"},domProps:{value:e.tagName},on:{input:function(t){t.target.composing||(e.tagName=t.target.value)}}})]),e._v(" "),o("div",{staticClass:"btn-wrapper"},[o("div",{staticClass:"sub-btn cancel",on:{click:function(t){e.isSubmitshow=!1}}},[e._v("取消")]),e._v(" "),o("div",{staticClass:"sub-btn",on:{click:function(t){return e.submitComment(t)}}},[e._v("确定并发布")])])],2):e._e()]),e._v(" "),o("nuxt-link",{attrs:{to:"/"}},[o("img",{attrs:{src:"/images/avatar/555.jpg",alt:""}})])],1)]),e._v(" "),o("div",{staticClass:"own-container"},[o("no-ssr",[o("mavon-editor",{ref:"md",attrs:{toolbars:e.markdownOption,ishljs:!0},on:{imgAdd:e.$imgAdd},model:{value:e.handbook,callback:function(t){e.handbook=t},expression:"handbook"}})],1)],1)])},[],!1,null,"3ebfdffe",null);t.default=component.exports}}]);