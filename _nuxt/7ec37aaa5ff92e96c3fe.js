(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{305:function(t,e,o){var content=o(323);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(8).default)("31929736",content,!0,{sourceMap:!1})},306:function(t,e,o){var content=o(336);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(8).default)("07651194",content,!0,{sourceMap:!1})},307:function(t,e,o){var content=o(338);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(8).default)("248044e1",content,!0,{sourceMap:!1})},308:function(t,e,o){var content=o(340);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(8).default)("53a2b9e1",content,!0,{sourceMap:!1})},322:function(t,e,o){"use strict";var n=o(305);o.n(n).a},323:function(t,e,o){(t.exports=o(7)(!1)).push([t.i,"#share .share-box[data-v-3bf1de01]{color:#eee}#share .share-box.mobile[data-v-3bf1de01]{width:100%;display:flex}#share .share-box.mobile>.share-link[data-v-3bf1de01]{display:none}#share .share-box.mobile>.share-link[class*=qzone][data-v-3bf1de01],#share .share-box.mobile>.share-link[class*=wechat][data-v-3bf1de01],#share .share-box.mobile>.share-link[class*=weibo][data-v-3bf1de01]{width:auto;flex-grow:1;display:inline-block}#share .share-box.mobile>.share-link[class*=qzone][data-v-3bf1de01]{margin:0}#share .share-box>.share-link[data-v-3bf1de01]{cursor:pointer;display:inline-block;text-align:center}#share .share-box>.share-link.wechat[data-v-3bf1de01]:hover{background-color:#7bb32e}#share .share-box>.share-link.weibo[data-v-3bf1de01]:hover{background-color:#e6162d}#share .share-box>.share-link.qzone[data-v-3bf1de01]:hover{background-color:#2b82d9}#share .share-box>.share-link.douban[data-v-3bf1de01]:hover{background-color:#071}#share .share-box>.share-link.renren[data-v-3bf1de01]:hover{background-color:#005eac}#share .share-box>.share-link.evernote[data-v-3bf1de01]:hover{background-color:#8be056}#share .share-box>.share-link.twitter[data-v-3bf1de01]:hover{background-color:#55acee}#share .share-box>.share-link.facebook[data-v-3bf1de01]:hover{background-color:#3b5998}#share .share-box>.share-link.google-plus[data-v-3bf1de01]:hover{background-color:#dd4b39}#share .share-box>.share-link.linkedin[data-v-3bf1de01]:hover{background-color:#007bb5}#share .share-box>.share-link.mail[data-v-3bf1de01]:hover{background-color:#5dc732}#share .share-box>.share-link.link[data-v-3bf1de01]:hover{background-color:#e67a1c}#share .share-box>.share-link:hover>.iconfont[data-v-3bf1de01]{color:#fff}",""])},334:function(t){t.exports=[{x:0,y:0},{x:8,y:12},{x:16,y:24},{x:24,y:36},{x:32,y:48},{x:40,y:60},{x:48,y:72},{x:60,y:84},{x:72,y:72},{x:80,y:60},{x:88,y:48},{x:96,y:36},{x:104,y:24},{x:112,y:12},{x:120,y:0},{x:104,y:0},{x:88,y:0},{x:80,y:12},{x:72,y:24},{x:60,y:36},{x:48,y:24},{x:40,y:10},{x:32,y:0},{x:16,y:0}]},335:function(t,e,o){"use strict";var n=o(306);o.n(n).a},336:function(t,e,o){(t.exports=o(7)(!1)).push([t.i,".loading-page[data-v-2cb2f0cc]{background:transparent;z-index:10}.loading-page canvas[data-v-2cb2f0cc]{width:120px;margin-top:2rem;margin-left:2rem}",""])},337:function(t,e,o){"use strict";var n=o(307);o.n(n).a},338:function(t,e,o){(t.exports=o(7)(!1)).push([t.i,".cm-content,.reply-preview{font-size:1em;line-height:2em;word-wrap:break-word}.cm-content a,.reply-preview a{text-decoration:underline}.cm-content img,.reply-preview img{margin:.5rem 0;max-width:100%;border-radius:2px}.cm-content p,.reply-preview p{margin:0}.cm-content code,.reply-preview code{color:#bd4147;padding:.3em .5em;margin:0 .5em;border-radius:4px;background-color:rgba(36,41,46,.12)}.cm-content pre,.reply-preview pre{overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px;width:100%}.cm-content pre>code,.reply-preview pre>code{margin:0;padding:1em;float:left;width:100%;height:100%;display:block;line-height:1.6em;background-color:transparent}#comment-box{position:relative;padding:1rem 0;font-family:Microsoft YaHei,Arial,Helvetica,sans-serif}#comment-box .loading{font-weight:700;text-align:center;height:7rem;line-height:7rem}#comment-box .list-box{margin-top:1rem;padding:1rem}#comment-box .list-box>.comment-list{padding:0;margin:0;list-style-type:none}#comment-box .list-box>.comment-list>.comment-item{position:relative;padding:.6em 0 .6em 3.6em;border-bottom:1px dashed #e6e6e6}#comment-box .list-box>.comment-list>.comment-item:last-child{border:0}#comment-box .list-box>.comment-list>.comment-item .cm-avatar{display:block;position:absolute;left:0;top:1.2rem}#comment-box .list-box>.comment-list>.comment-item .cm-avatar>a{display:block;width:36px;height:36px}#comment-box .list-box>.comment-list>.comment-item .cm-avatar>a>img{width:100%;height:100%;transition:-webkit-transform .5s ease-out;transition:transform .5s ease-out;transition:transform .5s ease-out,-webkit-transform .5s ease-out;border-radius:50%}#comment-box .list-box>.comment-list>.comment-item .user-label{color:#b3b1b1;background-color:#e2e2e2;display:inline;padding:.1em .4em;font-size:75%;font-weight:300;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em}#comment-box .list-box>.comment-list>.comment-item .cm-body{display:block;width:100%;height:100%;padding:.5rem 0}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-header{position:relative}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-header .meta{color:#a6a6a6;font-size:10px;padding:.6rem 0;display:flex;align-items:baseline;justify-content:space-between}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-header .meta .iconfont{margin-right:2px}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-header .meta span{margin-left:4px}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-header .meta span:first-child{margin-left:0}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-header .meta .reply{margin-left:1rem;text-decoration:none;font-size:12px;padding:2px 6px;border-radius:2px;color:#ef2f11;cursor:pointer}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-header>.user-name{display:block;color:#2c2020;font-weight:700;font-size:14px}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-header>.user-name .time{color:#a6a6a6;font-size:10px;margin-left:2rem}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-header>.user-name img{border-radius:4px;margin-right:.2rem}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-header>.user-name:hover{text-decoration:underline}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-content{color:#4a4a4a;font-size:14px;padding:.4rem 0}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-footer{display:flex;justify-content:flex-start;align-items:center}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-footer>.reply-avatar{width:36px;height:36px;display:block}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-footer>.reply-avatar>img{width:100%;height:100%;transition:-webkit-transform .5s ease-out;transition:transform .5s ease-out;transition:transform .5s ease-out,-webkit-transform .5s ease-out;border-radius:50%}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-footer>.reply-box{padding:.8rem}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-footer>.reply-box>.reply-name{color:#2c2020;font-weight:700;font-size:14px}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-footer>.reply-box>.reply-name a{text-decoration:none}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-footer>.reply-box>.reply-name a:hover{text-decoration:underline}#comment-box .list-box>.comment-list>.comment-item .cm-body>.cm-footer>.reply-box .reply-content{color:#4a4a4a;font-size:14px;margin-top:10px}#comment-box>.post-box{display:block;padding:1rem;background-color:hsla(0,0%,100%,.8);box-shadow:0 0 14px 2px #ebebeb;border-radius:2px}#comment-box>.post-box>.editor-box{width:100%;border-radius:4px;border:1px solid rgba(36,41,46,.12)}#comment-box>.post-box>.editor-box>.user{display:flex;width:100%;height:2em;line-height:2em}#comment-box>.post-box>.editor-box>.user>.email,#comment-box>.post-box>.editor-box>.user>.name,#comment-box>.post-box>.editor-box>.user>.site{flex-grow:1}#comment-box>.post-box>.editor-box>.user>.email>input,#comment-box>.post-box>.editor-box>.user>.name>input,#comment-box>.post-box>.editor-box>.user>.site>input{width:100%;padding:10px .5rem;background:transparent;resize:none;outline:none;max-width:100%;font-size:.775rem;border:none;border-bottom:1px dashed #dedede}#comment-box>.post-box>.editor-box>.user>.email>input:focus,#comment-box>.post-box>.editor-box>.user>.email>input:hover,#comment-box>.post-box>.editor-box>.user>.name>input:focus,#comment-box>.post-box>.editor-box>.user>.name>input:hover,#comment-box>.post-box>.editor-box>.user>.site>input:focus,#comment-box>.post-box>.editor-box>.user>.site>input:hover{border-color:#999}#comment-box>.post-box>.editor-box>.editor{flex-grow:1;position:relative}#comment-box>.post-box>.editor-box>.editor .will-reply{font-size:.95em;color:#999}#comment-box>.post-box>.editor-box>.editor .will-reply>.reply-user{display:flex;justify-content:space-between;padding:.4rem 1rem;height:2.6em;line-height:2.6em}#comment-box>.post-box>.editor-box>.editor .will-reply>.reply-user .cancel:hover{color:#db384c}#comment-box>.post-box>.editor-box>.editor .will-reply>.reply-preview{max-height:10em;overflow:auto;padding:.5rem 1rem;border-bottom:1px solid #eee}#comment-box>.post-box>.editor-box>.editor .markdown{position:relative;overflow:hidden}#comment-box>.post-box>.editor-box>.editor .markdown>.markdown-editor{min-height:14em;max-height:30em;overflow:auto;outline:none;padding:.8em .5em;cursor:auto;font-size:.85em;line-height:2em;background:url(/images/plun.png) no-repeat 100% 100%;border-bottom:1px dashed rgba(36,41,46,.12)}#comment-box>.post-box>.editor-box>.editor .markdown>.markdown-editor:empty:before{content:attr(placeholder);color:grey}#comment-box>.post-box>.editor-box>.editor .markdown>.markdown-editor:focus{content:none}#comment-box>.post-box>.editor-box>.editor .editor-tools{height:2rem;line-height:2rem;position:relative;color:#666}#comment-box>.post-box>.editor-box>.editor .editor-tools .iconfont{font-size:1.2rem}#comment-box>.post-box>.editor-box>.editor .editor-tools>.emoji-box{opacity:0;z-index:999;border:1px solid #eee;background-color:var(--theme-color);position:absolute;transition:opacity .3s ease;border-radius:0 0 8px 8px}#comment-box>.post-box>.editor-box>.editor .editor-tools>.emoji-box>.emoji-list{list-style:none;font-size:1em;display:flex;flex-wrap:nowrap}#comment-box>.post-box>.editor-box>.editor .editor-tools>.emoji-box>.emoji-list>.item{padding:0 .2em;cursor:pointer}#comment-box>.post-box>.editor-box>.editor .editor-tools>.code,#comment-box>.post-box>.editor-box>.editor .editor-tools>.emoji,#comment-box>.post-box>.editor-box>.editor .editor-tools>.image,#comment-box>.post-box>.editor-box>.editor .editor-tools>.link,#comment-box>.post-box>.editor-box>.editor .editor-tools>.preview{width:2em;height:auto;text-align:center;display:inline-block}#comment-box>.post-box>.editor-box>.editor .editor-tools>.code:hover,#comment-box>.post-box>.editor-box>.editor .editor-tools>.emoji:hover,#comment-box>.post-box>.editor-box>.editor .editor-tools>.image:hover,#comment-box>.post-box>.editor-box>.editor .editor-tools>.link:hover,#comment-box>.post-box>.editor-box>.editor .editor-tools>.preview:hover{color:#fff;background:var(--theme-color)}#comment-box>.post-box>.editor-box>.editor .editor-tools>.submit{float:right;color:#888;height:100%;position:relative;display:inline-block;font-size:14px;font-weight:500;line-height:20px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent}#comment-box>.post-box>.editor-box>.editor .editor-tools>.submit span{margin-right:.1rem}#comment-box>.post-box>.editor-box>.editor .editor-tools>.submit:hover{color:#fff;background:var(--theme-color)}",""])},339:function(t,e,o){"use strict";var n=o(308);o.n(n).a},340:function(t,e,o){(t.exports=o(7)(!1)).push([t.i,'.article-page[data-v-3d3ec5a2]{position:relative;width:100%}.article-widget[data-v-3d3ec5a2]{width:100%}.article-widget .source[data-v-3d3ec5a2]{position:absolute;top:-8px;left:-28px;display:block;width:80px;height:42px;line-height:58px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);text-align:center;font-size:12px}.article-widget .article-source[data-v-3d3ec5a2]{color:#fff;background:var(--theme-color);transition:background-color .2s ease-in}.card[data-v-3d3ec5a2]{position:relative;margin-bottom:16px;padding:0 16px;background-color:hsla(0,0%,100%,.8);box-shadow:0 0 14px 2px #ebebeb;border-radius:2px}.article-detail[data-v-3d3ec5a2]{padding:16px;overflow:hidden}.article-detail .title[data-v-3d3ec5a2]{margin:16px 0;font-size:20px;text-align:center;color:rgba(0,0,0,.65)}.article-detail .meta[data-v-3d3ec5a2]{justify-content:center;margin:12px 0 16px;color:rgba(0,0,0,.43);font-size:12px}.article-detail .meta[data-v-3d3ec5a2],.article-detail .meta .meta-item[data-v-3d3ec5a2]{display:flex;flex-direction:row;align-items:center;flex-wrap:nowrap}.article-detail .meta .meta-item[data-v-3d3ec5a2]{justify-content:flex-start;position:relative}.article-detail .meta .meta-item[data-v-3d3ec5a2]:before{content:"";width:2px;height:2px;margin:0 10px;border:1px solid rgba(0,0,0,.43);border-radius:1px}.reference[data-v-3d3ec5a2]{margin:20px}.reference .like[data-v-3d3ec5a2]{height:3rem;width:9rem;border-radius:26px;display:flex;align-items:center;justify-content:space-between;padding:0 10px;margin:0 auto;border:1px solid #eee;background-color:#fff;color:#666}.reference .like.active[data-v-3d3ec5a2]{background-color:var(--theme-color);border:1px solid var(--theme-color);color:#fff}.reference .like .fave[data-v-3d3ec5a2]{width:2.5rem;height:2.5rem;display:inline;border-radius:50%;background:url(/images/zan.png) no-repeat;background-position:0;background-size:auto 100%}.reference .like .fave.active[data-v-3d3ec5a2]{background-color:var(--theme-color);background-position:100%;transition:background .6s steps(19)}.reference .like section[data-v-3d3ec5a2]:first-child{display:flex;justify-content:center;align-items:center;flex:2}.reference .like section[data-v-3d3ec5a2]:last-child{flex:1;border-left:1px solid #e6e6e6;text-align:center}.copyright .wrapper[data-v-3d3ec5a2]{padding:.5em 1.8em;font-size:.93em;display:block;margin:2rem 0 1rem;border-left:3px solid var(--theme-color);border-radius:3px;word-break:break-word;line-height:1.8;background-color:var(--box-back-color);transition:border-left-color,background-color .4s ease-in}.copyright .wrapper span[data-v-3d3ec5a2]{margin-right:.2em;color:#5d686f}.copyright .wrapper a[data-v-3d3ec5a2]{text-decoration:none;color:#4094c7}.read-tool[data-v-3d3ec5a2]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;flex-wrap:nowrap}.read-tool .tool-meta[data-v-3d3ec5a2]{margin-bottom:8px;padding-bottom:8px}.read-tool .tool-meta .tool-item[data-v-3d3ec5a2]{background-color:#fff;border-radius:50%;width:3rem;height:3rem;box-shadow:0 2px 4px 0 rgba(0,0,0,.04);cursor:pointer;display:block;line-height:3rem;text-align:center;margin-bottom:20px;position:relative}.read-tool .tool-meta .tool-item .iconfont[data-v-3d3ec5a2]{font-size:22px;font-weight:300}.read-tool .tool-meta .tool-item.like.liked .iconfont[data-v-3d3ec5a2]{color:#74ca46}.read-tool .tool-meta .tool-item.like.liked[data-v-3d3ec5a2]:after{color:#fff;background-color:#74ca46}.read-tool .tool-meta .tool-item.like[data-v-3d3ec5a2]:after{content:attr(badge)}.read-tool .tool-meta .tool-item.comment[data-v-3d3ec5a2]:after,.read-tool .tool-meta .tool-item.like[data-v-3d3ec5a2]:after{position:absolute;top:0;left:75%;padding:.1rem .4rem;font-size:1rem;text-align:center;line-height:1;white-space:nowrap;color:#fff;background-color:#b2bac2;border-radius:.7rem;-webkit-transform-origin:left top;transform-origin:left top;-webkit-transform:scale(.75);transform:scale(.75)}.read-tool .tool-meta .tool-item.comment[data-v-3d3ec5a2]:after{content:attr(comment)}',""])},349:function(t,e,o){"use strict";o.r(e);o(51);var n=o(4),r=o(79),c=(o(35),o(52),o(77),o(321)),l=o.n(c),m={name:"fn-share",data:function(){return{}},computed:{url:function(){return"https://localhost:3000/".concat(this.$route.fullPath)}},methods:{description:function(){try{if(document)return document.getElementsByName("description")[0].getAttribute("content")}catch(t){return""}},title:function(){try{if(document)return document.title}catch(t){return"jkchao.cn"}},shareWindow:function(t){t=t.includes("mailto")?t.replace(/\s|\||jkchao.cn/g,""):encodeURI(t);var e=screen.availWidth/6*2,o=screen.availHeight/5*2,n=(screen.availHeight-o)/2,r=(screen.availWidth-e)/2,c="top=".concat(n,",left=").concat(r,",width=").concat(e,",height=").concat(o,",").concat("scrollbars=0,status=0,menubar=0,resizable=2,location=0");window.open(t,"newWin",c).focus()}},mounted:function(){this.clipboard=new l.a(this.$refs.share_copy_btn)},components:{}},d=(o(322),o(2)),h=Object(d.a)(m,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"share"}},[o("div",{staticClass:"share-box"},[o("a",{staticClass:"share-link wechat",attrs:{title:"微信",rel:"nofollow"},on:{click:function(e){return e.preventDefault(),t.shareWindow("http://qr.topscan.com/api.php?text="+t.url+"&w=300&el=h&m=10")}}},[o("i",{staticClass:"iconfont icon-wechat-fill"})]),t._v(" "),o("a",{staticClass:"share-link weibo",attrs:{title:"微博",rel:"nofollow"},on:{click:function(e){e.preventDefault(),t.shareWindow("http://service.weibo.com/share/share.php?url="+t.url+"&title="+t.title()+"&source="+t.url+"&sourceUrl="+t.url+"&content="+t.description())}}},[o("i",{staticClass:"iconfont icon-weibo"})]),t._v(" "),o("a",{staticClass:"share-link douban",attrs:{title:"豆瓣",rel:"nofollow"},on:{click:function(e){e.preventDefault(),t.shareWindow("https://www.douban.com/recommend/?url="+t.url+"&title="+t.title())}}},[o("i",{staticClass:"iconfont icon-douban"})]),t._v(" "),o("a",{staticClass:"share-link linkedin",attrs:{title:"linkedin",rel:"nofollow"},on:{click:function(e){e.preventDefault(),t.shareWindow("http://www.linkedin.com/shareArticle?title="+t.title()+"&summary="+t.description()+"&mini=true&url="+t.url)}}},[o("i",{staticClass:"iconfont icon-linkedin"})]),t._v(" "),o("a",{staticClass:"share-link mail",attrs:{title:"email",rel:"nofollow"},on:{click:function(e){e.preventDefault(),t.shareWindow("mailto:?subject="+t.title()+"&body="+t.url)}}},[o("i",{staticClass:"iconfont icon-mail"})]),t._v(" "),o("span",{ref:"share_copy_btn",staticClass:"share-link link",attrs:{rel:"nofollow","data-clipboard-text":t.url}},[o("i",{staticClass:"iconfont icon-link"})])])])},[],!1,null,"3bf1de01",null).exports,f=(o(44),o(20)),x=(o(53),o(54),o(55),o(17),o(162),o(300),o(78),o(100)),v=(o(324),o(325)),k={name:"loading-page",data:function(){return{points:o(334),color:Object(v.color)("#24292e"),mainIndex:7,context:{},radius:4,mainRadius:8,interval:{},loading:!1}},methods:{getPrevious:function(t){return 0===t?this.points.length-1:t-1},getNext:function(t){return t+1===this.points.length?0:t+1},setNextLighten:function(t){var e=this.points[t].lighten;this.points[t].lighten=8===e?1:e+1},draw:function(){var t=this,e=this.context;e.clearRect(0,0,140,104);this.points.forEach(function(o){e.beginPath();var n=t.radius+4;e.arc(o.x+n,o.y+n,t.radius,0,2*Math.PI,!1),e.fillStyle=t.color(Object(v.lightness)(o.lighten/10*35))(),e.fill()});var main=this.points[this.mainIndex],o=this.mainRadius-this.radius+4;e.beginPath(),e.arc(main.x+o,main.y+o,this.mainRadius,0,2*Math.PI,!1),e.fillStyle=this.color(),e.fill(),e.closePath()},calculate:function(){this.mainIndex=this.getNext(this.mainIndex);for(var t=this.mainIndex,i=0;i<=7;i++)t=this.getPrevious(t),this.setNextLighten(t)},update:function(){this.calculate(),this.draw()},animate:function(){this.interval=setInterval(this.update,30)},finish:function(){clearInterval(this.interval),this.loading=!1},start:function(){this.loading=!0}},mounted:function(){this.context=this.$refs.canvas.getContext("2d"),this.points=this.points.map(function(t){return Object(f.a)({lighten:8},t)});for(var i=1;i<=7;i++)this.points[this.mainIndex-i].lighten=i;this.draw(),this.animate()}},y=(o(335),Object(d.a)(k,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading-page"},[e("canvas",{ref:"canvas"})])},[],!1,null,"2cb2f0cc",null).exports),w=(o(138),o(99)),C={name:"fn-comment",data:function(){return{pid:0,sortMode:1,emojiShow:!1,commentContentHtml:"",commentContentText:"",previewContent:"",userCacheMode:!1,userCacheEditing:!1,user:{name:"",email:"",site:"",gravatar:null},likeComments:[],regexs:{email:/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}/,url:/^((https|http):\/\/)+[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/}}},props:{postId:{type:[String,Number],required:!0}},fetch:function(){},components:{loadingCom:y},computed:{userAgent:function(){return this.$store.state.options.userAgent},comment:function(){return this.$store.state.article.comments},replyCommentSelf:function(){var t=this;return this.comment.list.find(function(e){return Object.is(e.id,t.pid)})}},mounted:function(){this.initUser(),this.loadCommentList()},destroyed:function(){window.onscroll=null},methods:{UAParse:w.b,OSParse:w.a,marked:function(content){return Object(r.a)(content,null,!1).html},gravatar:function(t){return this.regexs.email.test(t)?x.a.url(t,{protocol:"https"}):null},initUser:function(){if(localStorage){var t=localStorage.getItem("BLOG_USER"),e=localStorage.getItem("LIKE_COMMENTS");e&&(this.likeComments=JSON.parse(e)),t&&(this.user=JSON.parse(t),this.updateUserGravatar(),this.userCacheMode=!0)}},updateUserGravatar:function(){var t=this.regexs.email.test(this.user.email);this.user.gravatar=t?this.gravatar(this.user.email):null},commentContentChange:function(){var html=this.$refs.markdown.innerHTML,text=this.$refs.markdown.innerText;Object.is(text,this.commentContentText)?this.commentContentText=html:this.commentContentText=text},updateCommentContent:function(t){var e=t.start,o=void 0===e?"":e,n=t.end,r=void 0===n?"":n;if(!o&&!r)return!1;var c=(window.getSelection||document.getSelection)().toString(),l=this.$refs.markdown.innerText||this.$refs.markdown.textContent;if(c){var m=l.replace(c,o+c+r);this.$refs.markdown.innerHTML=m}else void 0!==this.$refs.markdown.innerText?this.$refs.markdown.innerText=this.$refs.markdown.innerText+=o+r:this.$refs.markdown.innerHTML=this.$refs.markdown.innerHTML+=o+r,this.$refs.markdown.scrollTop=this.$refs.markdown.scrollHeight;this.commentContentChange()},clearCommentContent:function(){this.commentContentHtml="",this.$refs.markdown.innerHTML=this.commentContentHtml,this.commentContentChange()},insertContent:function(t){this.updateCommentContent({image:{start:"![",end:"]()"},link:{start:"[",end:"]()"},code:{start:"\n```javascript\n",end:"\n```"}}[t])},insertEmoji:function(t){this.updateCommentContent({end:t})},clickUser:function(t,e){e||t.preventDefault()},toSomeAnchorById:function(t){var e=document.getElementById(t);if(e){var o=Object.is(t,"post-box"),n=Object.is(t,"comment-box");if(scrollTo(e,500,{offset:o?-110:n?-70:-300}),o){var p=this.$refs.markdown,s=window.getSelection(),r=document.createRange();r.setStart(p,p.childElementCount),r.setEnd(p,p.childElementCount),s.removeAllRanges(),s.addRange(r)}}},replyComment:function(t){this.pid=t.id,this.toSomeAnchorById("post-box")},cancelCommentReply:function(){this.pid=0},foundReplyAvatarParent:function(t){var e=this.comment.list.find(function(e){return Object.is(e.id,t)});return this.gravatar(e?e.email:null)},foundReplyParent:function(t){var e=this.comment.list.find(function(e){return Object.is(e.id,t)});return e?e.name:null},foundReplyParentContent:function(t){var e=this.comment.list.find(function(e){return Object.is(e.id,t)}),content=e?e.content:null;return this.marked(content)},likeComment:function(t){var e=this;if(this.commentLiked(t._id))return!1;this.$store.dispatch("likeComment",{_id:t._id}).then(function(data){e.likeComments.push(t._id),localStorage.setItem("LIKE_COMMENTS",JSON.stringify(e.likeComments))}).catch(function(t){console.warn("评论点赞失败",t)})},commentLiked:function(t){return this.likeComments.includes(t)},loadCommentList:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,o=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=o.length>0&&void 0!==o[0]?o[0]:{}).sort=this.sortMode,t.next=4,this.$store.dispatch("loadCommentsByPostId",Object(f.a)({},e,{post_id:this.postId}));case 4:t.sent;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),submitComment:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var o,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),""!==this.user.name){t.next=3;break}return t.abrupt("return",alert("名字？"));case 3:if(""!==this.user.email){t.next=5;break}return t.abrupt("return",alert("邮箱？"));case 5:if(this.regexs.email.test(this.user.email)){t.next=7;break}return t.abrupt("return",alert("邮箱不合法"));case 7:if(!this.user.site||this.regexs.url.test(this.user.site)){t.next=9;break}return t.abrupt("return",alert("链接不合法"));case 9:if(this.commentContentText&&this.commentContentText.replace(/\s/g,"")){t.next=11;break}return t.abrupt("return",alert("内容？"));case 11:if(o=this.commentContentText.split("\n").length>36,n=this.commentContentText.length>1e3,!o&&!n){t.next=15;break}return t.abrupt("return",alert("内容需要在1000字/36行以内"));case 15:return this.user.site||delete this.user.site,t.next=18,this.$store.dispatch("postComment",{pid:this.pid,post_id:this.postId,content:this.commentContentText,name:this.user.name,email:this.user.email,site:this.user.site,agent:this.userAgent});case 18:200===t.sent.code?(this.userCacheMode=!0,this.cancelCommentReply(),this.clearCommentContent(),this.$nextTick(function(){}),localStorage.setItem("BLOG_USER",JSON.stringify(this.user))):alert("操作失败");case 20:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},_=(o(337),Object(d.a)(C,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"comment-box",attrs:{id:"comment-box"}},[o("form",{staticClass:"post-box",attrs:{name:"comment",id:"post-box"}},[o("div",{staticClass:"editor-box"},[o("div",{staticClass:"user"},[o("div",{staticClass:"name"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],attrs:{required:"",type:"text",name:"name",placeholder:"称呼（必填）",maxlength:"10"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"email"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],attrs:{required:"",type:"email",name:"email",placeholder:"邮箱（必填，不会公开）",maxlength:"40"},domProps:{value:t.user.email},on:{blur:t.updateUserGravatar,input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"site"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.user.site,expression:"user.site"}],attrs:{type:"url",name:"url",placeholder:"网站（http, https:// 开头，非必填）",maxlength:"40"},domProps:{value:t.user.site},on:{input:function(e){e.target.composing||t.$set(t.user,"site",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"editor"},[t.pid?o("div",{key:"1",staticClass:"will-reply"},[o("div",{staticClass:"reply-user"},[o("span",[o("span",[t._v("回复: @"+t._s(t.replyCommentSelf.name))])]),t._v(" "),o("a",{staticClass:"cancel iconfont icon-undo",attrs:{href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.cancelCommentReply(e)}}},[t._v("取消")])]),t._v(" "),o("div",{staticClass:"reply-preview",domProps:{innerHTML:t._s(t.marked(t.replyCommentSelf.content).length>100?t.marked(t.replyCommentSelf.content).slice(0,100)+"...":t.marked(t.replyCommentSelf.content))}})]):t._e(),t._v(" "),o("div",{key:"2",staticClass:"markdown"},[o("div",{ref:"markdown",staticClass:"markdown-editor",attrs:{contenteditable:"true",placeholder:"你就不想说点什么,或者占个板凳..."},on:{keyup:function(e){return t.commentContentChange(e)}}})]),t._v(" "),o("div",{key:"3",staticClass:"editor-tools"},[o("a",{staticClass:"emoji",attrs:{href:"",title:"emoji"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.emojiShow=!t.emojiShow}}},[o("i",{staticClass:"iconfont icon-smile"})]),t._v(" "),t._m(0),t._v(" "),o("div",{staticClass:"emoji-box",style:{opacity:t.emojiShow?1:0}},[o("ul",{staticClass:"emoji-list"},[o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("😃")}}},[t._v("😃")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("😂")}}},[t._v("😂")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("😅")}}},[t._v("😅")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("😉")}}},[t._v("😉")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("😌")}}},[t._v("😌")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("😔")}}},[t._v("😔")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("😓")}}},[t._v("😓")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("😘")}}},[t._v("😘")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("😡")}}},[t._v("😡")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("😭")}}},[t._v("😭")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("😱")}}},[t._v("😱")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("😳")}}},[t._v("😳")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("😵")}}},[t._v("😵")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("🌚")}}},[t._v("🌚")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("👍")}}},[t._v("👍")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("👎")}}},[t._v("👎")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("💪")}}},[t._v("💪")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("🌹")}}},[t._v("🌹")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("💊")}}},[t._v("💊")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("🇨🇳")}}},[t._v("🇨🇳")]),t._v(" "),o("li",{staticClass:"item",on:{click:function(e){return t.insertEmoji("🇺🇸")}}},[t._v("🇺🇸")])])]),t._v(" "),o("button",{staticClass:"submit",attrs:{type:"submit"},on:{click:function(e){return t.submitComment(e)}}},[o("span",[t._v("回复")])])])])])]),t._v(" "),t.comment.list.length&&0!==t.comment.list.length?o("div",{key:"1",staticClass:"list-box"},[o("ul",{staticClass:"comment-list"},t._l(t.comment.list,function(e){return o("li",{key:e.id,staticClass:"comment-item",attrs:{id:"comment-item-"+e.id}},[o("div",{staticClass:"cm-avatar"},[o("a",{attrs:{target:"_blank",rel:"external nofollow",href:e.site},on:{click:function(o){return o.stopPropagation(),t.clickUser(o,e.site)}}},[o("img",{attrs:{alt:e.name||"匿名用户",src:t.gravatar(e.email)||"/images/avatar/444.jpg"}})])]),t._v(" "),o("div",{staticClass:"cm-body"},[o("div",{staticClass:"cm-header"},[o("a",{staticClass:"user-name",attrs:{target:"_blank",rel:"external nofollow",href:e.site},on:{click:function(t){t.stopPropagation(),e.site}}},[o("span",[t._v(t._s(e.name))]),t._v(" "),"zhongqiang1839@163.com"===e.email?o("span",{staticClass:"user-label"},[t._v("博主")]):t._e()]),t._v(" "),o("div",{staticClass:"meta"},[o("span",{staticClass:"time"},[t._v(t._s(t._f("dateFormat")(e.create_at,"yyyy.MM.dd hh:mm")))]),t._v(" "),o("a",{staticClass:"reply",attrs:{href:""},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.replyComment(e)}}},[o("label",[t._v("回复")])])])]),t._v(" "),o("div",{staticClass:"cm-content"},[o("div",{domProps:{innerHTML:t._s(t.marked(e.content))}})]),t._v(" "),e.pid?o("div",{staticClass:"cm-footer"},[o("div",{staticClass:"reply-avatar"},[o("img",{attrs:{alt:e.name||"匿名用户",src:t.foundReplyAvatarParent(e.pid)||"/images/avatar/444.jpg"}})]),t._v(" "),o("div",{staticClass:"reply-box"},[o("p",{staticClass:"reply-name"},[o("a",{attrs:{href:""},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.toSomeAnchorById("comment-item-"+e.pid)}}},[o("span"),t._v(" "),t.foundReplyParent(e.pid)?o("strong",[t._v("@"+t._s(t.foundReplyParent(e.pid)))]):t._e()]),t._v(" "),"zhongqiang1839@163.com"===e.email?o("span",{staticClass:"user-label"},[t._v("博主")]):t._e()]),t._v(" "),o("div",{staticClass:"reply-content",domProps:{innerHTML:t._s(t.foundReplyParentContent(e.pid).length>150?t.foundReplyParentContent(e.pid).slice(0,150)+"...":t.foundReplyParentContent(e.pid))}})])]):t._e()])])}),0)]):t._e(),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.comment.fetching,expression:"comment.fetching"}],key:"2",staticClass:"loading"},[o("loadingCom")],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"emoji",attrs:{href:"https://segmentfault.com/markdown",target:"_blank",title:"emoji"}},[e("i",{staticClass:"iconfont icon-markdown-copy"})])}],!1,null,null,null).exports),j=o(23),z={name:"fn-article",transition:"fade",scrollToTop:!0,fetch:function(t){var e=t.store,o=t.params;return e.dispatch("getArtDetail",o)},head:function(){return{title:this.$store.state.article.details.title}},data:function(){return{source:j.a,isActive:!1,artLink:""}},computed:{artItem:function(){return this.$store.state.article.details},articleContent:function(){return Object(r.a)(this.artItem.content,!1,!0).html}},methods:{postLikeArticle:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isActive){t.next=2;break}return t.abrupt("return");case 2:return this.isActive=!0,t.next=5,this.$store.dispatch("postLikeArticle",this.artItem);case 5:t.sent.code;case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.artLink=location.href},components:{myShare:h,loadingCom:y,myComments:_}},E=(o(339),Object(d.a)(z,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"article-page"},[o("section",{staticClass:"container"},[o("div",{staticClass:"article-widget"},[o("div",{staticClass:"card article-detail"},[o("span",{staticClass:"source article-source"},[t._v(t._s(t.source[t.artItem.source].label))]),t._v(" "),o("h2",{staticClass:"title"},[t._v(t._s(t.artItem.title))]),t._v(" "),o("div",{staticClass:"meta"},[o("p",[t._v(t._s(t.artItem.formatTime)+" ")]),t._v(" "),o("div",{staticClass:"meta-item"},[t._v(t._s(t.artItem.likes)+" 人喜欢")]),t._v(" "),o("div",{staticClass:"meta-item"},[t._v(t._s(t.artItem.views)+" 次阅读")]),t._v(" "),o("div",{staticClass:"meta-item"},[t._v(t._s(t.artItem.comments)+" 条评论")])]),t._v(" "),o("div",{directives:[{name:"copyright",rawName:"v-copyright"},{name:"viewer",rawName:"v-viewer.static",value:{movable:!1,toolbar:{zoomIn:!0,zoomOut:!0,rotateLeft:!1,rotateRight:!1,flipHorizontal:!1,flipVertical:!1,prev:!0,play:!0,next:!0,oneToOne:!0,reset:!0}},expression:"{\n                movable: false,\n                toolbar: {\n                    zoomIn: true,\n                    zoomOut: true,\n                    rotateLeft: false,\n                    rotateRight: false,\n                    flipHorizontal: false,\n                    flipVertical: false,\n                    prev: true,\n                    play: true,\n                    next: true,\n                    oneToOne: true,\n                    reset: true,\n                }\n              }",modifiers:{static:!0}}],staticClass:"content markdown-body hljs",domProps:{innerHTML:t._s(t.articleContent)}}),t._v(" "),o("div",{staticClass:"reference"},[o("div",{class:["like",t.isActive?"active":""],on:{click:t.postLikeArticle}},[o("section",[o("div",{class:["fave",t.isActive?"active":""]}),o("span",[t._v("like")])]),t._v(" "),o("section",[t._v(t._s(t.artItem.likes))])])]),t._v(" "),o("div",{staticClass:"copyright"},[o("div",{staticClass:"wrapper"},[o("p",[o("span",[t._v("文本标题：")]),t._v(" "),o("a",{attrs:{href:""}},[t._v(t._s(t.artItem.title))])]),t._v(" "),o("p",[o("span",[t._v("文章链接：")]),t._v(" "),o("a",{attrs:{href:""}},[t._v(t._s(t.artLink))])]),t._v(" "),t._m(0)])]),t._v(" "),o("div",{staticClass:"share"})])]),t._v(" "),o("div",{staticClass:"comment"},[t.artItem.title?o("my-comments",{attrs:{"post-id":t.artItem.id}}):t._e()],1)])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",[this._v("版权信息：")]),this._v(" "),e("a",{attrs:{href:""}},[this._v('"署名-非商用-自由转载" 转载请保留原文链接。')])])}],!1,null,"3d3ec5a2",null));e.default=E.exports}}]);